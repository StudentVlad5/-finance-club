"use strict";(self.webpackChunkfinance_club=self.webpackChunkfinance_club||[]).push([[116],{5838:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var n=a(2791),s=a(9434),l=a(6856),i=a(2426),r=a.n(i),o=a(4116),c=a(8416),d=a(9297),h=a(9574),m=a(7791),u=a(8917),j=a(8966),p=a(7868),x=a(2941),v=a(8028),y=a(4164),g=a(5705),b=a(2642),f=a(5678),C=a(8169),k=a(6397),F=a(9390),S=a(6559),w=a(3329);const U=()=>{const[e,t]=(0,n.useState)([]),[a,i]=(0,n.useState)(""),[o,m]=(0,n.useState)(!1),[j,p]=(0,n.useState)(null),U=(0,s.v9)(b.L),A=(0,s.I0)(),W="/admin/users/".concat(U.id);(0,n.useEffect)((()=>{""!==U.id&&void 0!==U.id&&async function(){m(!0);try{const{data:e}=await(0,u.rQ)(W);if(t(e),i(e.images),!e)return(0,v.NI)("Whoops, something went wrong")}catch(j){p(j)}finally{m(!1)}}()}),[W,U.id]);const E=e=>{e.preventDefault(),A((0,d.V)()),(0,c.zU)(e),i("")};return(0,y.createPortal)("admin"===Object.values(U)[0]&&(0,w.jsx)(F.YM,{onClick:e=>{e.currentTarget===e.target&&E(e)},children:(0,w.jsxs)(F.u_,{onClick:e=>e.stopPropagation(),children:[(0,w.jsx)(S.sr,{type:"button",onClick:e=>E(e),"aria-label":"Close modal",children:(0,w.jsx)(l.FU5,{size:15})}),o?(0,x.j)():(0,x.l)(),j&&(0,v.NI)("Whoops, something went wrong"),(0,w.jsx)(g.J9,{initialValues:{name:null!==e&&void 0!==e&&e.name?e.name:"",surname:null!==e&&void 0!==e&&e.surname?e.surname:"",email:null!==e&&void 0!==e&&e.email?e.email:"",phone:null!==e&&void 0!==e&&e.phone?e.phone:"",company:null!==e&&void 0!==e&&e.company?e.company:"",position:null!==e&&void 0!==e&&e.position?e.position:"",birthday:null!==e&&void 0!==e&&e.birthday?e.birthday:"",events:null!==e&&void 0!==e&&e.events?e.events:[],packages:null!==e&&void 0!==e&&e.packages?e.packages:[{name:"",termActive:{from:"",to:""}}],avatar:"",status:null!==e&&void 0!==e&&e.status?e.status:"",role:null!==e&&void 0!==e&&e.role?e.role:""},onSubmit:(e,t)=>{let{setSubmitting:n}=t;!async function(e){let t=!1;"string"===typeof a&&""!==a&&"none"!==a?e.avatar=a:t=a,m(!0);try{const{code:a}=await(0,u.lQ)("/admin/users/".concat(U.id),e,t);if(a&&201!==a)return(0,v.NI)("Whoops, something went wrong")}catch(j){alert(j),p(j)}finally{m(!1),A((0,h.W)(!0)),i("")}}(e),A((0,h.W)(!1)),n(!1),A((0,d.V)()),(0,c.zU)()},enableReinitialize:!0,validationSchema:k.Z.updateUserSchema,children:t=>{let{handleChange:a,handleSubmit:n,setFieldValue:s,isSubmitting:o,values:c,errors:d,touched:h}=t;return(0,w.jsxs)(S.Yr,{autoComplete:"off",onSubmit:n,onChange:a,children:[(0,w.jsxs)(S.fR,{children:[(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"name",children:[(0,w.jsx)("span",{children:"Name"}),d.name&&h.name?(0,w.jsx)(S.jj,{children:d.name}):null]}),(0,w.jsx)(S.yt,{type:"text",id:"name",name:"name",placeholder:"User name",value:c.name})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"surname",children:[(0,w.jsx)("span",{children:"Surname"}),d.surname&&h.surname?(0,w.jsx)(S.jj,{children:d.surname}):null]}),(0,w.jsx)(S.yt,{type:"text",id:"surname",name:"surname",placeholder:"User surname",value:c.surname})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"email",children:[(0,w.jsx)("span",{children:"Email"}),d.email&&h.email?(0,w.jsx)(S.jj,{children:d.email}):null]}),(0,w.jsx)(S.yt,{type:"email",id:"email",name:"email",placeholder:"User email",value:c.email})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"phone",children:[(0,w.jsx)("span",{children:"Phone"}),d.phone&&h.phone?(0,w.jsx)(S.jj,{children:d.phone}):null]}),(0,w.jsx)(S.yt,{type:"phone",id:"phone",name:"phone",placeholder:"User phone",value:c.phone})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"company",children:[(0,w.jsx)("span",{children:"Company"}),d.company&&h.company?(0,w.jsx)(S.jj,{children:d.company}):null]}),(0,w.jsx)(S.yt,{type:"text",id:"company",name:"company",placeholder:"User company",value:c.company})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"position",children:[(0,w.jsx)("span",{children:"Position"}),d.position&&h.position?(0,w.jsx)(S.jj,{children:d.position}):null]}),(0,w.jsx)(S.yt,{type:"text",id:"position",name:"position",placeholder:"User position",value:c.position})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"birthday",children:[(0,w.jsx)("span",{children:"Birthday"}),d.birthday&&h.birthday?(0,w.jsx)(S.jj,{children:d.birthday}):null]}),(0,w.jsx)(S.yt,{type:"date",id:"birthday",name:"birthday",placeholder:"User birthday",value:r()(c.birthday).format("YYYY-MM-DD")})]}),(0,w.jsx)(g.F2,{name:"packages",render:e=>(0,w.jsxs)(S.YW,{children:[(0,w.jsx)(S.lX,{children:"Packages"}),(0,w.jsxs)(S.h3,{style:{flexDirection:"column",gap:"5px"},children:[c.packages.map(((t,n)=>{var l,i;return(0,w.jsx)(S.WA,{style:{width:"100%"},children:(0,w.jsxs)("div",{name:"packages.".concat(n),children:[(0,w.jsx)("label",{htmlFor:"packages",children:(0,w.jsxs)(S.Lj,{id:"packages",name:"packages.[".concat(n,"].name"),value:t.name,onChange:e=>{a(e),s("packages[".concat(n,"].name"),e.target.value)},style:{display:"block"},children:[(0,w.jsx)("option",{value:"",label:"",children:"Name"}),(0,w.jsx)("option",{value:"basic",label:"basic",children:"basic"}),(0,w.jsx)("option",{value:"pro",label:"pro",children:"pro"}),(0,w.jsx)("option",{value:"expert",label:"expert",children:"expert"})]})}),(0,w.jsxs)("label",{children:[(0,w.jsx)("span",{children:"from"}),(0,w.jsx)(S.tY,{type:"date",id:"from",name:"packages.[".concat(n,"].termActive.from"),placeholder:"from",value:r()(null===(l=t.termActive)||void 0===l?void 0:l.from).format("YYYY-MM-DD"),onChange:e=>{a(e),s("packages[".concat(n,"].termActive.from"),e.target.value)}})]}),(0,w.jsxs)("label",{children:[(0,w.jsx)("span",{children:"to"}),(0,w.jsx)(S.tY,{type:"date",id:"to",name:"packages.[".concat(n,"].termActive.to"),placeholder:"to",value:r()(null===(i=t.termActive)||void 0===i?void 0:i.to).format("YYYY-MM-DD"),onChange:e=>{a(e),s("packages[".concat(n,"].termActive.to"),e.target.value)}})]}),(0,w.jsx)(S.nb,{type:"button",onClick:()=>e.remove(n),children:"-"})]})},n)})),(0,w.jsx)(S.B2,{type:"button",onClick:()=>e.push({name:"",termActive:{from:"",to:""}}),children:"+"})]})]})}),(0,w.jsx)(g.F2,{name:"events",render:e=>(0,w.jsxs)(S.YW,{children:[(0,w.jsx)(S.lX,{children:"Events"}),(0,w.jsx)(S.wq,{children:c.events&&c.events.length>0?c.events.map(((t,a)=>(0,w.jsxs)("div",{children:[(0,w.jsx)(S.yt,{name:"events.".concat(a)}),(0,w.jsx)(S.nb,{type:"button",onClick:()=>e.remove(a),children:"-"}),(0,w.jsx)(S.nb,{type:"button",onClick:()=>e.insert(a,""),children:"+"})]},a))):(0,w.jsx)(S.iY,{type:"button",onClick:()=>e.push(""),children:"Add an event id"})})]})}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"avatar",children:[(0,w.jsx)("span",{children:"Avatar"}),d.avatar&&h.avatar?(0,w.jsx)(S.jj,{children:d.avatar}):null]}),e.avatar&&""!==e.avatar?(0,w.jsx)(S.lq,{style:{backgroundImage:"url(".concat(f.L2+"avatars/"+e.avatar.split("/")[e.avatar.split("/").length-1],")"),backgroundUser:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},type:"file",id:"avatar",name:"avatar",placeholder:"avatar",accept:".jpg,.jpeg,.webp,.png,.gif",onChange:t=>{a(t),s("avatar",e.avatar.split("/")[e.avatar.split("/").length-1]),i(t.target.files[0]),(0,C.Q)(t)}}):(0,w.jsx)(S.lq,{type:"file",id:"avatar",name:"avatar",accept:".jpg,.jpeg,.webp,.png,.gif",onChange:e=>{a(e),s("avatar",e.target.files[0]),i(e.target.files[0]),(0,C.Q)(e)}})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"role",children:[(0,w.jsx)("span",{children:"Role"}),d.role&&h.role?(0,w.jsx)(S.jj,{children:d.role}):null]}),(0,w.jsxs)(S.C7,{children:[(0,w.jsxs)("label",{style:{marginRight:"5px"},htmlFor:"candidate",children:[(0,w.jsx)(S.yt,{type:"radio",id:"candidate",name:"role",value:"candidate",checked:"candidate"===c.role}),(0,w.jsx)("span",{children:"candidate"})]}),(0,w.jsxs)("label",{style:{marginRight:"5px"},htmlFor:"member",children:[(0,w.jsx)(S.yt,{type:"radio",id:"member",name:"role",value:"member",checked:"member"===c.role}),(0,w.jsx)("span",{children:"member"})]}),(0,w.jsxs)("label",{htmlFor:"guest",children:[(0,w.jsx)(S.yt,{type:"radio",id:"guest",name:"role",value:"guest",checked:"guest"===c.role}),(0,w.jsx)("span",{children:"guest"})]})]})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"status",children:[(0,w.jsx)("span",{children:"Status"}),d.status&&h.status?(0,w.jsx)(S.jj,{children:d.status}):null]}),(0,w.jsxs)(S.C7,{children:[(0,w.jsxs)("label",{style:{marginRight:"5px"},htmlFor:"status_active",children:[(0,w.jsx)(S.yt,{type:"radio",id:"status_active",name:"status",value:"active",checked:"active"===c.status}),(0,w.jsx)("span",{children:"active"})]}),(0,w.jsxs)("label",{htmlFor:"status_inActive",children:[(0,w.jsx)(S.yt,{type:"radio",id:"status_inActive",name:"status",value:"inActive",checked:"inActive"===c.status}),(0,w.jsx)("span",{children:"inActive"})]})]})]})]}),(0,w.jsx)(S.JP,{type:"submit",disabled:o,"aria-label":"Submit",children:(0,w.jsx)(l.vB0,{size:15})})]})}})]})}),document.querySelector("#popup-root"))},A=()=>{const[e,t]=(0,n.useState)(!1),[a,i]=(0,n.useState)(null),[r,o]=(0,n.useState)(""),m=(0,s.v9)(b.L),j=(0,s.I0)();const p=e=>{e.preventDefault(),j((0,d.V)()),(0,c.zU)(e),o("")};return(0,y.createPortal)("admin_create"===Object.values(m)[0]&&(0,w.jsx)(F.YM,{onClick:e=>{e.currentTarget===e.target&&p(e)},children:(0,w.jsxs)(F.u_,{onClick:e=>e.stopPropagation(),children:[(0,w.jsx)(S.sr,{type:"button",onClick:e=>p(e),"aria-label":"Close modal",children:(0,w.jsx)(l.FU5,{size:15})}),e?(0,x.j)():(0,x.l)(),a&&(0,v.NI)("Whoops, something went wrong"),(0,w.jsx)(g.J9,{initialValues:{name:"",surname:"",email:"",password:"",phone:"",company:"",position:"",birthday:"",events:[],packages:[{name:"",termActive:{from:"",to:""}}],status:"active",avatar:"",role:"candidate"},onSubmit:(e,n)=>{let{setSubmitting:s}=n;!async function(e){const n=r;t(!0);try{const{code:t}=await(0,u.eh)("/admin/users/create",e,n);if(t&&201!==t)return(0,v.NI)("Whoops, something went wrong")}catch(a){i(a),alert(a.message)}finally{t(!1),j((0,h.W)(!0)),o("")}}(e),j((0,h.W)(!1)),s(!1),(0,c.zU)(),j((0,d.V)())},enableReinitialize:!0,validationSchema:k.Z.createUserSchema,children:e=>{let{handleChange:t,handleSubmit:a,setFieldValue:n,isSubmitting:s,values:i,errors:r,touched:c}=e;return(0,w.jsxs)(S.Yr,{autoComplete:"off",onSubmit:a,onChange:t,children:[(0,w.jsxs)(S.fR,{children:[(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"name",children:[(0,w.jsx)("span",{children:"Name"}),r.name&&c.name?(0,w.jsx)(S.jj,{children:r.name}):null]}),(0,w.jsx)(S.yt,{type:"text",id:"name",name:"name",placeholder:"User name",value:i.name})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"surname",children:[(0,w.jsx)("span",{children:"Surname"}),r.surname&&c.surname?(0,w.jsx)(S.jj,{children:r.surname}):null]}),(0,w.jsx)(S.yt,{type:"text",id:"surname",name:"surname",placeholder:"User surname",value:i.surname})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"email",children:[(0,w.jsx)("span",{children:"Email"}),r.email&&c.email?(0,w.jsx)(S.jj,{children:r.email}):null]}),(0,w.jsx)(S.yt,{type:"email",id:"email",name:"email",placeholder:"User email",value:i.email})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"password",children:[(0,w.jsx)("span",{children:"Password"}),r.password&&c.password?(0,w.jsx)(S.jj,{children:r.password}):null]}),(0,w.jsx)(S.yt,{type:"text",id:"password",name:"password",placeholder:"Default user password -> email",value:i.password})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"phone",children:[(0,w.jsx)("span",{children:"Phone"}),r.phone&&c.phone?(0,w.jsx)(S.jj,{children:r.phone}):null]}),(0,w.jsx)(S.yt,{type:"phone",id:"phone",name:"phone",placeholder:"User phone",value:i.phone})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"company",children:[(0,w.jsx)("span",{children:"Company"}),r.company&&c.company?(0,w.jsx)(S.jj,{children:r.company}):null]}),(0,w.jsx)(S.yt,{type:"text",id:"company",name:"company",placeholder:"User company",value:i.company})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"position",children:[(0,w.jsx)("span",{children:"Position"}),r.position&&c.position?(0,w.jsx)(S.jj,{children:r.position}):null]}),(0,w.jsx)(S.yt,{type:"text",id:"position",name:"position",placeholder:"User position",value:i.position})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"birthday",children:[(0,w.jsx)("span",{children:"Birthday"}),r.birthday&&c.birthday?(0,w.jsx)(S.jj,{children:r.birthday}):null]}),(0,w.jsx)(S.yt,{type:"date",id:"birthday",name:"birthday",placeholder:"User birthday",value:i.birthday})]}),(0,w.jsx)(g.F2,{name:"packages",render:e=>(0,w.jsxs)(S.YW,{children:[(0,w.jsx)(S.lX,{children:"Packages"}),(0,w.jsxs)(S.h3,{style:{flexDirection:"column",gap:"5px"},children:[i.packages.map(((a,s)=>{var l,i;return(0,w.jsx)(S.WA,{style:{width:"100%"},children:(0,w.jsxs)("div",{name:"packages.".concat(s),children:[(0,w.jsx)("label",{htmlFor:"packages",children:(0,w.jsxs)(S.Lj,{id:"packages",name:"packages.[".concat(s,"].name"),value:a.name,onChange:e=>{t(e),n("packages[".concat(s,"].name"),e.target.value)},style:{display:"block"},children:[(0,w.jsx)("option",{value:"",label:"",children:"Name"}),(0,w.jsx)("option",{value:"basic",label:"basic",children:"basic"}),(0,w.jsx)("option",{value:"pro",label:"pro",children:"pro"}),(0,w.jsx)("option",{value:"expert",label:"expert",children:"expert"})]})}),(0,w.jsxs)("label",{children:[(0,w.jsx)("span",{children:"from"}),(0,w.jsx)(S.tY,{type:"date",id:"from",name:"packages.[".concat(s,"].termActive.from"),placeholder:"from",value:null===(l=a.termActive)||void 0===l?void 0:l.from,onChange:e=>{t(e),n("packages[".concat(s,"].termActive.from"),e.target.value)}})]}),(0,w.jsxs)("label",{children:[(0,w.jsx)("span",{children:"to"}),(0,w.jsx)(S.tY,{type:"date",id:"to",name:"packages.[".concat(s,"].termActive.to"),placeholder:"to",value:null===(i=a.termActive)||void 0===i?void 0:i.to,onChange:e=>{t(e),n("packages[".concat(s,"].termActive.to"),e.target.value)}})]}),(0,w.jsx)(S.nb,{type:"button",onClick:()=>e.remove(s),children:"-"})]})},s)})),(0,w.jsx)(S.B2,{type:"button",onClick:()=>e.push({name:"",termActive:{from:"",to:""}}),children:"+"})]})]})}),(0,w.jsx)(g.F2,{name:"events",render:e=>(0,w.jsxs)(S.YW,{children:[(0,w.jsx)(S.lX,{children:"Events"}),(0,w.jsx)(S.wq,{children:i.events&&i.events.length>0?i.events.map(((t,a)=>(0,w.jsxs)("div",{children:[(0,w.jsx)(S.yt,{name:"events.".concat(a),value:t}),(0,w.jsx)(S.nb,{type:"button",onClick:()=>e.remove(a),children:"-"}),(0,w.jsx)(S.nb,{type:"button",onClick:()=>e.insert(a,""),children:"+"})]},a))):(0,w.jsx)(S.iY,{type:"button",onClick:()=>e.push(""),children:"Add an event id"})})]})}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"avatar",children:[(0,w.jsx)("span",{children:"Avatar"}),r.avatar&&c.avatar?(0,w.jsx)(S.jj,{children:r.avatar}):null]}),i.avatar?(0,w.jsx)(S.lq,{style:{backgroundImage:"url(".concat(i.avatar.split("/")[i.avatar.split("/").length-1],")"),backgroundUser:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},type:"file",id:"avatar",name:"avatar",placeholder:"avatar",accept:".jpg,.jpeg,.webp,.png,.gif",onChange:e=>{t(e),n("avatar",e.target.files[0]),o(e.target.files[0]),(0,C.Q)(e)}}):(0,w.jsx)(S.lq,{type:"file",id:"avatar",name:"avatar",accept:".jpg,.jpeg,.webp,.png,.gif",onChange:e=>{t(e),n("avatar",e.target.files[0]),o(e.target.files[0]),(0,C.Q)(e)}})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"role",children:[(0,w.jsx)("span",{children:"Role"}),r.role&&c.role?(0,w.jsx)(S.jj,{children:r.role}):null]}),(0,w.jsxs)(S.C7,{children:[(0,w.jsxs)("label",{htmlFor:"candidate",style:{marginRight:"5px"},children:[(0,w.jsx)(S.yt,{type:"radio",id:"candidate",name:"role",value:"candidate"}),(0,w.jsx)("span",{children:"candidate"})]}),(0,w.jsxs)("label",{htmlFor:"member",style:{marginRight:"5px"},children:[(0,w.jsx)(S.yt,{type:"radio",id:"member",name:"role",value:"member"}),(0,w.jsx)("span",{children:"member"})]}),(0,w.jsxs)("label",{htmlFor:"guest",children:[(0,w.jsx)(S.yt,{type:"radio",id:"guest",name:"role",value:"guest"}),(0,w.jsx)("span",{children:"guest"})]})]})]}),(0,w.jsxs)(S.Wi,{children:[(0,w.jsxs)(S.lX,{htmlFor:"status",children:[(0,w.jsx)("span",{children:"Status"}),r.status&&c.status?(0,w.jsx)(S.jj,{children:r.status}):null]}),(0,w.jsxs)(S.C7,{children:[(0,w.jsxs)("label",{style:{marginRight:"5px"},htmlFor:"status_active",children:[(0,w.jsx)(S.yt,{type:"radio",id:"status_active",name:"status",value:"active"}),(0,w.jsx)("span",{children:"active"})]}),(0,w.jsxs)("label",{htmlFor:"status_inActive",children:[(0,w.jsx)(S.yt,{type:"radio",id:"status_inActive",name:"status",value:"inActive"}),(0,w.jsx)("span",{children:"inActive"})]})]})]})]}),(0,w.jsx)(S.JP,{type:"submit",disabled:s,"aria-label":"Submit",children:(0,w.jsx)(l.vB0,{size:15})})]})}})]})}),document.querySelector("#popup-root"))};var W=a(6650),E=a(6838);const P={filterName:"",filterSurname:"",filterEmail:"",filterPhone:"",filterCompany:"",filterPosition:"",filterBirthday:"",filterEvents:"",filterPackages:"",filterAvatar:"",filterStatus:"",filterRole:""},Y=()=>{const[e,t]=(0,n.useState)([]),[a,i]=(0,n.useState)(!1),[y,g]=(0,n.useState)(null),b=(0,s.v9)(m.Y),[f,C]=(0,n.useState)([]),[k,F]=(0,n.useState)(P);(0,n.useEffect)((()=>{!async function(){i(!0);try{const{data:e}=await(0,u.rQ)("/admin/users");if(t(e),C(e),!e)return(0,v.NI)("Whoops, something went wrong")}catch(y){g(y)}finally{i(!1)}}()}),[b]);const S=e=>{e.preventDefault();const{name:t,value:a}=e.currentTarget,n={...k,[t]:a};F(n),document.querySelector("button[id='".concat(t,"'][name='startFilterUsers']")).classList.remove("active"),document.querySelector("button[id='".concat(t,"'][name='cleanFilterUsers']")).classList.add("active")},Y=t=>{t.preventDefault();const a=[];e.map((e=>{let t=e.avatar&&""!==e.avatar?"yes":"no";e.name.toString().toLowerCase().includes(k.filterName)&&e.surname.toString().toLowerCase().includes(k.filterSurname)&&e.email.toString().toLowerCase().includes(k.filterEmail)&&e.phone.toString().toLowerCase().includes(k.filterPhone)&&e.company.toString().toLowerCase().includes(k.filterCompany)&&e.position.toString().toLowerCase().includes(k.filterPosition)&&r()(e.birthday).format("DD.MM.YYYY").includes(k.filterBirthday)&&e.events.join(", ").toString().toLowerCase().includes(k.filterEvents)&&e.packages.flatMap((e=>e.name)).toString().toLowerCase().includes(k.filterPackages)&&t.toString().toLowerCase().includes(k.filterAvatar)&&e.status.toString().toLowerCase().includes(k.filterStatus)&&e.role.toString().toLowerCase().includes(k.filterRole)&&a.push(e)})),I(1),C(a)},D=e=>{e.preventDefault();const{id:t}=e.currentTarget,a={...k,[t]:""};F(a),document.querySelector("button[id='".concat(t,"'][name='startFilterUsers']")).classList.add("active"),document.querySelector("button[id='".concat(t,"'][name='cleanFilterUsers']")).classList.remove("active"),Y(e)},N=e=>{"Enter"==e.key&&Y(e)},B=window.screen.width,[O,L]=(0,n.useState)(B<=1536),R=()=>L((e=>!e)),X=(0,s.I0)(),z=e=>{e.preventDefault(),e.stopPropagation(),"admin"!==e.currentTarget.dataset.modal&&"admin_create"!==e.currentTarget.dataset.modal||(X((0,d.Y)({modal:e.currentTarget.dataset.modal,id:e.currentTarget.dataset.id})),setTimeout((()=>(0,c.bd)(e,null)),200))},[_]=(0,n.useState)(20),[M,q]=(0,n.useState)(_),[G,I]=(0,n.useState)((0,j.L2)("page")?(0,j.L2)("page"):1);return(0,n.useEffect)((()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(o.H,{Company:"Administration",Position:"Users Administration"}),(0,w.jsxs)(E.tq,{children:[(0,w.jsx)(W.x,{to:"/admin",children:"Back"}),a?(0,x.j)():(0,x.l)(),y&&(0,v.NI)("Whoops, something went wrong"),(0,w.jsxs)("div",{style:{display:"flex",marginTop:"20px"},children:[(0,w.jsx)(E.OM,{type:"button",id:"filters",name:"clearFilters","aria-label":"Clear all filters",onClick:e=>{X(!0===b?(0,h.W)(!1):(0,h.W)(!0)),F(P),document.querySelectorAll("button[name='startFilterUsers']").forEach((e=>e.classList.add("active"))),document.querySelectorAll("button[name='cleanFilterUsers']").forEach((e=>e.classList.remove("active")))},children:"Clear all filters"}),O?(0,w.jsx)(E.aF,{onClick:R,children:"More details"}):(0,w.jsx)(E.aF,{onClick:R,children:"Less details"})]}),(0,w.jsxs)(E.iA,{children:[(0,w.jsx)(E.ke,{children:(0,w.jsxs)(E.SC,{children:[(0,w.jsxs)(E.ss,{children:[(0,w.jsx)("input",{type:"text",name:"filterName",placeholder:"Name",value:k.filterName,onKeyDown:e=>N(e),onChange:e=>S(e)}),(0,w.jsxs)(E.Bo,{children:[(0,w.jsx)("button",{type:"button",id:"filterName",name:"startFilterUsers",className:"active",onClick:e=>Y(e),children:(0,w.jsx)(l.O$5,{})}),(0,w.jsx)("button",{type:"button",id:"filterName",name:"cleanFilterUsers",onClick:e=>{D(e)},children:(0,w.jsx)(l.EGO,{})})]})]}),(0,w.jsxs)(E.ss,{children:[(0,w.jsx)("input",{type:"text",name:"filterSurname",placeholder:"Surname",value:k.filterSurname,onKeyDown:e=>N(e),onChange:e=>S(e)}),(0,w.jsxs)(E.Bo,{children:[(0,w.jsx)("button",{type:"button",id:"filterSurname",name:"startFilterUsers",className:"active",onClick:e=>Y(e),children:(0,w.jsx)(l.O$5,{})}),(0,w.jsx)("button",{type:"button",id:"filterSurname",name:"cleanFilterUsers",onClick:e=>{D(e)},children:(0,w.jsx)(l.EGO,{})})]})]}),(0,w.jsxs)(E.ss,{children:[(0,w.jsx)("input",{type:"email",name:"filterEmail",placeholder:"Email",value:k.filterEmail,onKeyDown:e=>N(e),onChange:e=>S(e)}),(0,w.jsxs)(E.Bo,{children:[(0,w.jsx)("button",{type:"button",id:"filterEmail",name:"startFilterUsers",className:"active",onClick:e=>Y(e),children:(0,w.jsx)(l.O$5,{})}),(0,w.jsx)("button",{type:"button",id:"filterEmail",name:"cleanFilterUsers",onClick:e=>{D(e)},children:(0,w.jsx)(l.EGO,{})})]})]}),(0,w.jsxs)(E.ss,{children:[(0,w.jsx)("input",{type:"phone",name:"filterPhone",placeholder:"Phone",value:k.filterPhone,onKeyDown:e=>N(e),onChange:e=>S(e)}),(0,w.jsxs)(E.Bo,{children:[(0,w.jsx)("button",{type:"button",id:"filterPhone",name:"startFilterUsers",className:"active",onClick:e=>Y(e),children:(0,w.jsx)(l.O$5,{})}),(0,w.jsx)("button",{type:"button",id:"filterPhone",name:"cleanFilterUsers",onClick:e=>{D(e)},children:(0,w.jsx)(l.EGO,{})})]})]}),(0,w.jsxs)(E.ss,{children:[(0,w.jsx)("input",{type:"text",name:"filterStatus",placeholder:"Status",value:k.filterStatus,onKeyDown:e=>N(e),onChange:e=>S(e)}),(0,w.jsxs)(E.Bo,{children:[(0,w.jsx)("button",{type:"button",id:"filterStatus",name:"startFilterUsers",className:"active",onClick:e=>Y(e),children:(0,w.jsx)(l.O$5,{})}),(0,w.jsx)("button",{type:"button",id:"filterStatus",name:"cleanFilterUsers",onClick:e=>{D(e)},children:(0,w.jsx)(l.EGO,{})})]})]}),!O&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(E.ss,{children:[(0,w.jsx)("input",{type:"text",name:"filterCompany",placeholder:"Company",value:k.filterCompany,onKeyDown:e=>N(e),onChange:e=>S(e)}),(0,w.jsxs)(E.Bo,{children:[(0,w.jsx)("button",{type:"button",id:"filterCompany",name:"startFilterUsers",className:"active",onClick:e=>Y(e),children:(0,w.jsx)(l.O$5,{})}),(0,w.jsx)("button",{type:"button",id:"filterCompany",name:"cleanFilterUsers",onClick:e=>{D(e)},children:(0,w.jsx)(l.EGO,{})})]})]}),(0,w.jsxs)(E.ss,{children:[(0,w.jsx)("input",{type:"text",name:"filterPosition",placeholder:"Position",value:k.filterPosition,onKeyDown:e=>N(e),onChange:e=>S(e)}),(0,w.jsxs)(E.Bo,{children:[(0,w.jsx)("button",{type:"button",id:"filterPosition",name:"startFilterUsers",className:"active",onClick:e=>Y(e),children:(0,w.jsx)(l.O$5,{})}),(0,w.jsx)("button",{type:"button",id:"filterPosition",name:"cleanFilterUsers",onClick:e=>{D(e)},children:(0,w.jsx)(l.EGO,{})})]})]}),(0,w.jsxs)(E.ss,{children:[(0,w.jsx)("input",{type:"text",name:"filterBirthday",placeholder:"Birthday",value:k.filterBirthday,onKeyDown:e=>N(e),onChange:e=>S(e)}),(0,w.jsxs)(E.Bo,{children:[(0,w.jsx)("button",{type:"button",id:"filterBirthday",name:"startFilterUsers",className:"active",onClick:e=>Y(e),children:(0,w.jsx)(l.O$5,{})}),(0,w.jsx)("button",{type:"button",id:"filterBirthday",name:"cleanFilterUsers",onClick:e=>{D(e)},children:(0,w.jsx)(l.EGO,{})})]})]}),(0,w.jsxs)(E.ss,{children:[(0,w.jsx)("input",{type:"text",name:"filterEvents",placeholder:"Events",value:k.filterEvents,onKeyDown:e=>N(e),onChange:e=>S(e)}),(0,w.jsxs)(E.Bo,{children:[(0,w.jsx)("button",{type:"button",id:"filterEvents",name:"startFilterUsers",className:"active",onClick:e=>Y(e),children:(0,w.jsx)(l.O$5,{})}),(0,w.jsx)("button",{type:"button",id:"filterEvents",name:"cleanFilterUsers",onClick:e=>{D(e)},children:(0,w.jsx)(l.EGO,{})})]})]}),(0,w.jsxs)(E.ss,{children:[(0,w.jsx)("input",{type:"text",name:"filterPackages",placeholder:"Packages",value:k.filterPackages,onKeyDown:e=>N(e),onChange:e=>S(e)}),(0,w.jsxs)(E.Bo,{children:[(0,w.jsx)("button",{type:"button",id:"filterPackages",name:"startFilterUsers",className:"active",onClick:e=>Y(e),children:(0,w.jsx)(l.O$5,{})}),(0,w.jsx)("button",{type:"button",id:"filterPackages",name:"cleanFilterUsers",onClick:e=>{D(e)},children:(0,w.jsx)(l.EGO,{})})]})]}),(0,w.jsxs)(E.ss,{children:[(0,w.jsx)("input",{type:"text",name:"filterAvatar",placeholder:"Avatar",value:k.filterAvatar,onKeyDown:e=>N(e),onChange:e=>S(e)}),(0,w.jsxs)(E.Bo,{children:[(0,w.jsx)("button",{type:"button",id:"filterAvatar",name:"startFilterUsers",className:"active",onClick:e=>Y(e),children:(0,w.jsx)(l.O$5,{})}),(0,w.jsx)("button",{type:"button",id:"filterAvatar",name:"cleanFilterUsers",onClick:e=>{D(e)},children:(0,w.jsx)(l.EGO,{})})]})]}),(0,w.jsxs)(E.ss,{children:[(0,w.jsx)("input",{type:"text",name:"filterRole",placeholder:"Role",value:k.filterRole,onKeyDown:e=>N(e),onChange:e=>S(e)}),(0,w.jsxs)(E.Bo,{children:[(0,w.jsx)("button",{type:"button",id:"filterRole",name:"startFilterUsers",className:"active",onClick:e=>Y(e),children:(0,w.jsx)(l.O$5,{})}),(0,w.jsx)("button",{type:"button",id:"filterRole",name:"cleanFilterUsers",onClick:e=>{D(e)},children:(0,w.jsx)(l.EGO,{})})]})]})]}),(0,w.jsx)(E.ss,{children:(0,w.jsx)(E.a5,{type:"button","aria-label":"Create user",onClick:e=>{z(e)},"data-modal":"admin_create",children:(0,w.jsx)(l.xTJ,{size:25})})})]})}),(0,w.jsxs)("tbody",{children:[(0,w.jsxs)(E.SC,{children:[(0,w.jsx)(E.ss,{children:"Name"}),(0,w.jsx)(E.ss,{children:"Surname"}),(0,w.jsx)(E.ss,{children:"Email"}),(0,w.jsx)(E.ss,{children:"Phone"}),(0,w.jsx)(E.ss,{children:"Status"}),!O&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(E.ss,{children:"Company"}),(0,w.jsx)(E.ss,{children:"Position"}),(0,w.jsx)(E.ss,{children:"Birthday"}),(0,w.jsx)(E.ss,{children:"Events"}),(0,w.jsx)(E.ss,{children:"Packages"}),(0,w.jsx)(E.ss,{children:"Avatar"}),(0,w.jsx)(E.ss,{children:"Role"})]}),(0,w.jsx)(E.ss,{children:"Action"})]}),f.length>0&&!y&&f.slice((G-1)*M,G*M).map((e=>(0,w.jsxs)(E.SC,{children:[(0,w.jsx)(E.C5,{children:e.name}),(0,w.jsx)(E.C5,{children:e.surname}),(0,w.jsx)(E.C5,{children:e.email}),(0,w.jsx)(E.C5,{children:e.phone}),(0,w.jsx)(E.C5,{children:e.status}),!O&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(E.C5,{children:e.company}),(0,w.jsx)(E.C5,{children:e.position}),(0,w.jsx)(E.C5,{children:r()(e.birthday).format("DD.MM.YYYY")}),(0,w.jsx)(E.C5,{children:e.events.join(", ")}),(0,w.jsx)(E.C5,{children:e.packages.flatMap((e=>e.name))}),(0,w.jsx)(E.C5,{children:e.avatar&&""!==e.avatar?"yes":"no"}),(0,w.jsx)(E.C5,{children:e.role})]}),(0,w.jsxs)(E.C5,{children:[(0,w.jsx)(E.a5,{type:"button","aria-label":"Edit user",onClick:e=>{z(e)},"data-modal":"admin","data-id":e._id,children:(0,w.jsx)(l.zmo,{size:15})}),(0,w.jsx)(E.a5,{type:"button","aria-label":"Delete user",onClick:()=>{!async function(e){i(!0);try{const{date:t}=await(0,u.SR)("/admin/users/".concat(e));return t}catch(y){g(y)}finally{X(!0===b?(0,h.W)(!1):(0,h.W)(!0)),i(!1)}}(e._id)},children:(0,w.jsx)(l.FU5,{size:15})})]})]},e._id)))]})]}),(0,w.jsx)(p.G,{items:f,size:M,setSize:q,current:G,setCurrent:I})]}),(0,w.jsx)(U,{}),(0,w.jsx)(A,{})]})}},8169:(e,t,a)=>{a.d(t,{Q:()=>s});var n=a(8028);function s(e){const t=document.querySelector("#".concat(e.target.id));if(t.files[0]&&t.files[0].size>=2048e3)return t.value="",e.target.style="",void(0,n.gV)("File size must be less than 2Mb!");if(t.files[0]&&!["jpeg","png","webp","gif","jpg"].includes(t.files[0].type.split("/")[1]))return t.value="",e.target.style="",void(0,n.gV)("File type must be only image!");const a=new FileReader;e.target.style="",a.onload=function(){e.target.style="background-image: url(".concat(a.result,"); background-size: contain; background-position: center; background-repeat: no-repeat;")},t.files[0]&&a.readAsDataURL(t.files[0])}}}]);
//# sourceMappingURL=116.4ab3cc82.chunk.js.map